## ======================================================================
## GENERATED FILE. DO NOT EDIT
## ======================================================================

groups:
- name: update-releases
  jobs:
  - update-binary-buildpack
  - update-bosh-dns-aliases
  - update-bpm
  - update-capi
  - update-cf-networking
  - update-cf-smoke-tests
  - update-cf-syslog-drain
  - update-cflinuxfs3
  - update-diego
  - update-dotnet-core-buildpack
  - update-garden-runc
  - update-go-buildpack
  - update-java-buildpack
  - update-log-cache
  - update-loggregator
  - update-loggregator-agent
  - update-nats
  - update-nginx-buildpack
  - update-nodejs-buildpack
  - update-php-buildpack
  - update-python-buildpack
  - update-pxc
  - update-r-buildpack
  - update-routing
  - update-ruby-buildpack
  - update-silk
  - update-staticfile-buildpack
  - update-statsd-injector
  - update-uaa
  - update-credhub
  - update-cf-cli
resources:
- name: binary-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/binary-buildpack-release
- name: bosh-dns-aliases-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/bosh-dns-aliases-release
- name: bpm-release
  type: bosh-io-release
  source:
    repository: cloudfoundry-incubator/bpm-release
- name: capi-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/capi-release
- name: cf-networking-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/cf-networking-release
- name: cf-smoke-tests-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/cf-smoke-tests-release
- name: cf-syslog-drain-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/cf-syslog-drain-release
- name: cflinuxfs3-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/cflinuxfs3-release
- name: diego-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/diego-release
- name: dotnet-core-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/dotnet-core-buildpack-release
- name: garden-runc-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/garden-runc-release
- name: go-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/go-buildpack-release
- name: java-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/java-buildpack-release
- name: log-cache-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/log-cache-release
- name: loggregator-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/loggregator-release
- name: loggregator-agent-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/loggregator-agent-release
- name: nats-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/nats-release
- name: nginx-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/nginx-buildpack-release
- name: nodejs-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/nodejs-buildpack-release
- name: php-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/php-buildpack-release
- name: python-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/python-buildpack-release
- name: pxc-release
  type: bosh-io-release
  source:
    repository: cloudfoundry-incubator/pxc-release
- name: r-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/r-buildpack-release
- name: routing-release
  type: bosh-io-release
  source:
    repository: cloudfoundry-incubator/cf-routing-release
- name: ruby-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/ruby-buildpack-release
- name: silk-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/silk-release
- name: staticfile-buildpack-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/staticfile-buildpack-release
- name: statsd-injector-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/statsd-injector-release
- name: uaa-release
  type: bosh-io-release
  source:
    repository: cloudfoundry/uaa-release
- name: credhub-release
  type: bosh-io-release
  source:
    repository: pivotal-cf/credhub-release
- name: cf-cli-release
  type: bosh-io-release
  source:
    repository: bosh-packages/cf-cli-release
- name: cf-deployment-release-candidate
  type: git
  source:
    branch: release-candidate
    uri: git@github.com:cloudfoundry/cf-deployment.git
    private_key: ((cf_deployment_readwrite_deploy_key.private_key))
- name: stemcell
  type: bosh-io-stemcell
  source:
    name: bosh-google-kvm-ubuntu-xenial-go_agent
- name: cf-deployment-concourse-tasks
  type: git
  source:
    branch: master
    uri: https://github.com/cloudfoundry/cf-deployment-concourse-tasks.git
- name: runtime-ci
  type: git
  source:
    branch: master
    uri: https://github.com/cloudfoundry/runtime-ci.git
- name: relint-envs
  type: git
  source:
    branch: master
    uri: git@github.com:cloudfoundry/relint-envs.git
    private_key: ((hagrid_env_readwrite_deploy_key.private_key))
jobs:
- name: update-binary-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: binary-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-binary-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: binary-buildpack-release
    params:
      RELEASE_NAME: binary-buildpack
  - task: update-additional-ops-files-binary-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: binary-buildpack-release
    params:
      RELEASE_NAME: binary-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-bosh-dns-aliases
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: bosh-dns-aliases-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-bosh-dns-aliases
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: bosh-dns-aliases-release
    params:
      RELEASE_NAME: bosh-dns-aliases
  - task: update-additional-ops-files-bosh-dns-aliases
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: bosh-dns-aliases-release
    params:
      RELEASE_NAME: bosh-dns-aliases
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: bosh-dns-aliases-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-bosh-dns-aliases-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-bpm
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: bpm-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-bpm
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: bpm-release
    params:
      RELEASE_NAME: bpm
  - task: update-additional-ops-files-bpm
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: bpm-release
    params:
      RELEASE_NAME: bpm
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: bpm-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-bpm-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-capi
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: capi-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-capi
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: capi-release
    params:
      RELEASE_NAME: capi
  - task: update-additional-ops-files-capi
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: capi-release
    params:
      RELEASE_NAME: capi
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: capi-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-capi-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-cf-networking
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: cf-networking-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-cf-networking
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: cf-networking-release
    params:
      RELEASE_NAME: cf-networking
  - task: update-additional-ops-files-cf-networking
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: cf-networking-release
    params:
      RELEASE_NAME: cf-networking
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: cf-networking-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-cf-networking-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-cf-smoke-tests
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: cf-smoke-tests-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-cf-smoke-tests
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: cf-smoke-tests-release
    params:
      RELEASE_NAME: cf-smoke-tests
  - task: update-additional-ops-files-cf-smoke-tests
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: cf-smoke-tests-release
    params:
      RELEASE_NAME: cf-smoke-tests
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: cf-smoke-tests-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-cf-smoke-tests-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-cf-syslog-drain
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: cf-syslog-drain-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-cf-syslog-drain
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: cf-syslog-drain-release
    params:
      RELEASE_NAME: cf-syslog-drain
  - task: update-additional-ops-files-cf-syslog-drain
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: cf-syslog-drain-release
    params:
      RELEASE_NAME: cf-syslog-drain
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: cf-syslog-drain-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-cf-syslog-drain-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-cflinuxfs3
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: cflinuxfs3-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-cflinuxfs3
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: cflinuxfs3-release
    params:
      RELEASE_NAME: cflinuxfs3
  - task: update-additional-ops-files-cflinuxfs3
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: cflinuxfs3-release
    params:
      RELEASE_NAME: cflinuxfs3
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: cflinuxfs3-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-cflinuxfs3-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-diego
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: diego-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-diego
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: diego-release
    params:
      RELEASE_NAME: diego
  - task: update-additional-ops-files-diego
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: diego-release
    params:
      RELEASE_NAME: diego
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: diego-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-diego-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-dotnet-core-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: dotnet-core-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-dotnet-core-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: dotnet-core-buildpack-release
    params:
      RELEASE_NAME: dotnet-core-buildpack
  - task: update-additional-ops-files-dotnet-core-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: dotnet-core-buildpack-release
    params:
      RELEASE_NAME: dotnet-core-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-garden-runc
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: garden-runc-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-garden-runc
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: garden-runc-release
    params:
      RELEASE_NAME: garden-runc
  - task: update-additional-ops-files-garden-runc
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: garden-runc-release
    params:
      RELEASE_NAME: garden-runc
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: garden-runc-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-garden-runc-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-go-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: go-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-go-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: go-buildpack-release
    params:
      RELEASE_NAME: go-buildpack
  - task: update-additional-ops-files-go-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: go-buildpack-release
    params:
      RELEASE_NAME: go-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-java-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: java-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-java-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: java-buildpack-release
    params:
      RELEASE_NAME: java-buildpack
  - task: update-additional-ops-files-java-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: java-buildpack-release
    params:
      RELEASE_NAME: java-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-log-cache
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: log-cache-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-log-cache
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: log-cache-release
    params:
      RELEASE_NAME: log-cache
  - task: update-additional-ops-files-log-cache
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: log-cache-release
    params:
      RELEASE_NAME: log-cache
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: log-cache-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-log-cache-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-loggregator
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: loggregator-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-loggregator
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: loggregator-release
    params:
      RELEASE_NAME: loggregator
  - task: update-additional-ops-files-loggregator
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: loggregator-release
    params:
      RELEASE_NAME: loggregator
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: loggregator-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-loggregator-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-loggregator-agent
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: loggregator-agent-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-loggregator-agent
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: loggregator-agent-release
    params:
      RELEASE_NAME: loggregator-agent
  - task: update-additional-ops-files-loggregator-agent
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: loggregator-agent-release
    params:
      RELEASE_NAME: loggregator-agent
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: loggregator-agent-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-loggregator-agent-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-nats
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: nats-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-nats
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: nats-release
    params:
      RELEASE_NAME: nats
  - task: update-additional-ops-files-nats
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: nats-release
    params:
      RELEASE_NAME: nats
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: nats-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-nats-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-nginx-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: nginx-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-nginx-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: nginx-buildpack-release
    params:
      RELEASE_NAME: nginx-buildpack
  - task: update-additional-ops-files-nginx-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: nginx-buildpack-release
    params:
      RELEASE_NAME: nginx-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-nodejs-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: nodejs-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-nodejs-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: nodejs-buildpack-release
    params:
      RELEASE_NAME: nodejs-buildpack
  - task: update-additional-ops-files-nodejs-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: nodejs-buildpack-release
    params:
      RELEASE_NAME: nodejs-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-php-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: php-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-php-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: php-buildpack-release
    params:
      RELEASE_NAME: php-buildpack
  - task: update-additional-ops-files-php-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: php-buildpack-release
    params:
      RELEASE_NAME: php-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-python-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: python-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-python-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: python-buildpack-release
    params:
      RELEASE_NAME: python-buildpack
  - task: update-additional-ops-files-python-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: python-buildpack-release
    params:
      RELEASE_NAME: python-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-pxc
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: pxc-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-pxc
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: pxc-release
    params:
      RELEASE_NAME: pxc
  - task: update-additional-ops-files-pxc
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: pxc-release
    params:
      RELEASE_NAME: pxc
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: pxc-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-pxc-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-r-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: r-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-r-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: r-buildpack-release
    params:
      RELEASE_NAME: r-buildpack
  - task: update-additional-ops-files-r-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: r-buildpack-release
    params:
      RELEASE_NAME: r-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-routing
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: routing-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-routing
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: routing-release
    params:
      RELEASE_NAME: routing
  - task: update-additional-ops-files-routing
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: routing-release
    params:
      RELEASE_NAME: routing
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: routing-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-routing-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-ruby-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: ruby-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-ruby-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: ruby-buildpack-release
    params:
      RELEASE_NAME: ruby-buildpack
  - task: update-additional-ops-files-ruby-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: ruby-buildpack-release
    params:
      RELEASE_NAME: ruby-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-silk
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: silk-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-silk
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: silk-release
    params:
      RELEASE_NAME: silk
  - task: update-additional-ops-files-silk
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: silk-release
    params:
      RELEASE_NAME: silk
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: silk-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-silk-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-staticfile-buildpack
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: staticfile-buildpack-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-staticfile-buildpack
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: staticfile-buildpack-release
    params:
      RELEASE_NAME: staticfile-buildpack
  - task: update-additional-ops-files-staticfile-buildpack
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: staticfile-buildpack-release
    params:
      RELEASE_NAME: staticfile-buildpack
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-statsd-injector
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: statsd-injector-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-statsd-injector
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: statsd-injector-release
    params:
      RELEASE_NAME: statsd-injector
  - task: update-additional-ops-files-statsd-injector
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: statsd-injector-release
    params:
      RELEASE_NAME: statsd-injector
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: statsd-injector-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-statsd-injector-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-uaa
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: uaa-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-uaa
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: uaa-release
    params:
      RELEASE_NAME: uaa
  - task: update-additional-ops-files-uaa
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: uaa-release
    params:
      RELEASE_NAME: uaa
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: uaa-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-uaa-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-credhub
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: credhub-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-credhub
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: credhub-release
    params:
      RELEASE_NAME: credhub
  - task: update-additional-ops-files-credhub
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: credhub-release
    params:
      RELEASE_NAME: credhub
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: credhub-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-credhub-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
- name: update-cf-cli
  serial_groups:
  - update-release
  public: true
  plan:
  - aggregate:
    - get: cf-cli-release
      trigger: true
      params:
        tarball: false
    - get: cf-deployment-release-candidate
    - get: stemcell
      params:
        tarball: false
    - get: cf-deployment-concourse-tasks
    - get: runtime-ci
    - get: relint-envs
  - task: update-release-cf-cli
    file: runtime-ci/tasks/update-single-manifest-release/task.yml
    input_mapping:
      deployment-configuration: cf-deployment-release-candidate
      release: cf-cli-release
    params:
      RELEASE_NAME: cf-cli
  - task: update-additional-ops-files-cf-cli
    file: runtime-ci/tasks/update-single-opsfile-release/task.yml
    input_mapping:
      current-commit-message: commit-message
      original-ops-file: cf-deployment-release-candidate
      release: cf-cli-release
    params:
      RELEASE_NAME: cf-cli
  - task: bosh-dry-run
    file: runtime-ci/tasks/bosh-dry-run-with-ops/task.yml
    input_mapping:
      bbl-state: relint-envs
      cf-deployment: updated-deployment-manifest
      ops-files: cf-deployment-release-candidate
      vars-files: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME_SUFFIX: cf-cli-pre-dev
      SYSTEM_DOMAIN: greengrass.cf-app.com
  - task: bosh-delete-deployment
    file: cf-deployment-concourse-tasks/bosh-delete-deployment/task.yml
    input_mapping:
      bbl-state: relint-envs
    params:
      BBL_STATE_DIR: environments/test/greengrass/bbl-state
      DEPLOYMENT_NAME: cf-dry-run-cf-cli-pre-dev
  - task: commit-generated-manifest-and-ops
    file: runtime-ci/tasks/commit-generated-manifest/task.yml
    input_mapping:
      manifest: updated-deployment-manifest
      ops-file: updated-ops-file
      repo: cf-deployment-release-candidate
    params:
      COMMIT_ALL_OPS_FILES: true
      MANIFEST_DESTINATION: cf-deployment.yml
      MANIFEST_NAME: cf-deployment.yml
